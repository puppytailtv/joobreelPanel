(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"9pxh":function(e,t,s){"use strict";s.r(t),s.d(t,"ProfileModule",function(){return F});var i=s("SVse"),r=s("iInd"),o=s("G0yt"),n=s("PSD3"),h=s.n(n),c=s("8Y7J"),a=s("cFG6"),l=s("gkCN"),d=s("LqlI"),u=s("npAJ"),m=s("7g+E");function b(e,t){1&e&&c.Nb(0,"img",17)}function g(e,t){if(1&e&&c.Nb(0,"img",18),2&e){const e=c.fc();c.kc("src",null==e.resultList1?null:e.resultList1.profile_picture_url,c.zc)}}function p(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",4),c.Sb(1,"button",19),c.dc("click",function(){return c.xc(e),c.fc().toggle(1)}),c.Ic(2," Liked "),c.Rb(),c.Ic(3,"\xa0\xa0\xa0 "),c.Sb(4,"button",20),c.dc("click",function(){return c.xc(e),c.fc().toggle(2)}),c.Ic(5," Saved "),c.Rb(),c.Ic(6," \xa0\xa0\xa0 "),c.Rb()}}function f(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",4),c.Sb(1,"button",20),c.dc("click",function(){return c.xc(e),c.fc().toggle(1)}),c.Ic(2," Liked "),c.Rb(),c.Ic(3,"\xa0\xa0\xa0 "),c.Sb(4,"button",19),c.dc("click",function(){return c.xc(e),c.fc().toggle(2)}),c.Ic(5," Saved "),c.Rb(),c.Ic(6,"\xa0\xa0\xa0 "),c.Rb()}}function w(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"div",22),c.Sb(2,"video",23),c.Nb(3,"source",24),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.$implicit;c.zb(3),c.kc("src",e.video_url,c.zc)}}function v(e,t){if(1&e&&(c.Sb(0,"div"),c.Gc(1,w,4,1,"div",21),c.Rb()),2&e){const e=c.fc();c.zb(1),c.kc("ngForOf",e.like)}}function S(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"div",22),c.Sb(2,"video",23),c.Nb(3,"source",24),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.$implicit;c.zb(3),c.kc("src",e.video_url,c.zc)}}function k(e,t){if(1&e&&(c.Sb(0,"div"),c.Gc(1,S,4,1,"div",21),c.Rb()),2&e){const e=c.fc();c.zb(1),c.kc("ngForOf",e.save)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r,o){this.routes=e,this.service=t,this.reuseFun=s,this.modalService=i,this.auth=r,this.spinner=o,this.resultList=[],this.resultList1=[],this.resultListProduct=[],this.resultListLike=[],this.userId="",this.productId=[],this.resultListComment=[],this.resultListFollowing=[],this.commentProductId=[],this.comment=[],this.comments=[],this.editComments=!0,this.url=[],this.cities=[],this.max="9",this.commentModalToggle=!0,this.resultListFollower=[],this.formToggle=!0,this.listReviews=[],this.color=1,this.config={ignoreBackdropClick:!0,class:"modal-md modal-dialog-centered"},this.settings={length:4,numbersOnly:!0,timer:60,timerType:1},this.removeCheck=!0,$("#profileSwitchingFalse").trigger("click"),this.reuseFun.checkLoggedIn(),this.isLoggedIn=this.auth.isLoggedIn(),this.userId=this.auth.getUserId(),this.email=this.auth.getEmail(),this.profilePic=this.auth.getProfileImage(),this.imagePath=this.reuseFun.imagePath,this.removeCheck="public/propertyThumbnail/userImage.jpeg"==this.profilePic}ngOnInit(){this.userProfile(),this.liked(),this.saved()}userProfile(e=null,t=null){this.spinner.show(),this.service.userProfile().subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.resultList1=e.data,this.profileimg=e.data.profile_picture_url,this.username=e.data.username,this.bio=e.data.shelter_bio,this.spinner.hide())},e=>{})}liked(e=null,t=null){this.spinner.show(),this.service.liked().subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.like=e.data,this.spinner.hide())},e=>{})}saved(e=null,t=null){this.spinner.show(),this.service.saved().subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.save=e.data,this.spinner.hide())},e=>{})}listLike(e){this.service.listLike(e).subscribe(e=>{400==e.data.code||(this.resultListLike=e.data.result)},e=>{})}toggle(e){this.color=e}modalLikes(e,t){this.listLike(t),this.modalRef=this.modalService.show(e,this.config)}editComment(e){this.commentModalToggle=!1,this.comments[e].textField=!1}modalComments(e,t){this.commentModalToggle=!0,this.comments=[],this.listComment(t),this.commentProductId=t,this.modalRef=this.modalService.show(e,this.config)}follow(e,t){this.spinner.show(),this.service.follow(this.userId,e).subscribe(e=>{400==e.data.code||(this.listLike(t),this.spinner.hide())},e=>{})}update(e,t){1==t&&this.modalRef.hide(),this.userId==e?this.routes.navigate(["/profile"]):this.routes.navigate(["/dukan"],{queryParams:{dukanId:e}})}checkComment(){let e=!1;this.reuseFun.textTypeLength("#l11","comment",this.comment.length,1,250)&&(e=!0),0==e&&this.addcomment(this.commentProductId,this.comment)}addcomment(e,t){this.service.addcomment(e,this.userId).subscribe(t=>{400==t.data.code||(this.comments=[],this.listComment(e),this.comment="")},e=>{})}listComment(e){this.spinner.show(),this.service.listComment(e).subscribe(e=>{if(400==e.data.code);else{this.resultListComment=e.data.result,this.comment=[];for(let e=0;e<this.resultListComment.length;e++)this.comments.push({id:"",productId:"",comment:"",created_at:"",updated_at:"",textField:!0,user:[]}),this.comments[e].id=this.resultListComment[e].id,this.comments[e].productId=this.resultListComment[e].productId,this.comments[e].comment=this.resultListComment[e].comment,this.comments[e].created_at=this.resultListComment[e].created_at,this.comments[e].updated_at=this.resultListComment[e].updated_at,this.comments[e].user=this.resultListComment[e].user;this.spinner.hide()}},e=>{})}close(){this.comments=[]}updateComment(e,t,s){this.commentModalToggle=!0,this.service.updateComment(e,t).subscribe(e=>{400==e.data.code||(this.comments=[],this.comment="",this.listComment(s))},e=>{})}deleteComment(e,t){h.a.fire({text:"Are you sure you want to delete comment!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff5757",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(s=>{s.value&&(this.spinner.show(),this.service.deleteComment(e,t).subscribe(e=>{400==e.data.code||(this.comments=[],this.reuseFun.successShowSwal(e.data.message),this.listComment(t))},e=>{}))})}listUserFollowings(){this.spinner.show(),this.service.listUserFollowings(this.userId).subscribe(e=>{400==e.data.code?(this.spinner.hide(),this.reuseFun.errorShowSwal(e.data.message)):(this.resultListFollower=e.data.result,this.resultListFollower.forEach(e=>{e.status=!1}),this.spinner.hide())},e=>{})}modalFollowings(e,t,s,i,r){this.listUserFollowings(),this.postId=t,this.postOwnerThumbnail=s,this.postOwnerDukanName=i,this.postImage=r,this.modalRef=this.modalService.show(e,this.config)}listUserFollowers(e){this.service.listUserFollowers(e).subscribe(e=>{400==e.data.code||(this.resultListFollower=e.data.result)},e=>{})}modalFollower(e,t){this.listUserFollowers(t),this.modalRef=this.modalService.show(e,this.config)}modalEditProfile(e,t){this.userProfile(t),this.dukanName=this.resultList.dukanName,this.dukanBio=this.resultList.dukanBio,this.address=this.resultList.address,this.phoneNumber=this.resultList.contactNo,this.oldPhoneNumber=this.resultList.contactNo,this.selectedCity=parseInt(this.resultList.cityId),this.modalRef=this.modalService.show(e,this.config)}getCitiesDropdown(){this.service.listCity().subscribe(e=>{400==e.data.code||(this.cities=e.data.result)},e=>{})}numberCheck(e){return this.reuseFun.numberCheckWithLength(e)}checkUpdateProfile(e){let t=!1;this.reuseFun.textTypeLength("#l1","Dukan name",this.dukanName,3,15)&&(t=!0),this.reuseFun.textTypeLength("#l2","Dukan Bio",this.dukanBio,1,150)&&(t=!0),this.reuseFun.textTypeLength("#l3","Address",this.address,3,150)&&(t=!0),this.reuseFun.textTypeLengthPhoneNumber("#l4","Phone Number",this.phoneNumber.length,9,9)&&(t=!0),this.reuseFun.checkEmpty("#l5","city",this.selectedCity)&&(t=!0),0==t&&this.checkPhoneNumber()}checkPhoneNumber(){this.oldPhoneNumber==this.phoneNumber?this.updateProfile():this.sendOtpPhoneNumber()}onInputChange(e){e.length==this.settings.length?(e==this.otpResult?this.updateProfile():this.reuseFun.errorShowSwal("Invalid OTP"),console.log("otp is",e)):-1==e?console.log(e,"resend button enables"):-2==e&&(this.sendOtpPhoneNumber(),console.log("resend otp"))}ngOnDestroy(){$("#profileSwitchingTrue").trigger("click")}sendOtpPhoneNumber(){this.spinner.show(),this.service.sendOTPPhoneNumber(this.phoneNumber,this.email,"cn").subscribe(e=>{400==e.data.code?(this.spinner.hide(),this.reuseFun.errorShowSwal(e.data.message)):(this.reuseFun.successShowSwal(e.data.message),this.formToggle=!1,this.otpResult=e.data.OTP,this.spinner.hide())},e=>{})}removeErrors(e){$(e).text("")}removeFile(){h.a.fire({text:"Are you sure you want to remove image!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff5757",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(e=>{e.value&&(this.spinner.show(),this.service.removeImage().subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.reuseFun.successShowSwal(e.data.message),this.auth.sendProfileImage(e.data.result),$("#imageBtn").trigger("click"),this.userProfile(),this.spinner.hide())},e=>{}))})}updateProfile(){this.spinner.show(),this.service.updateUser(this.dukanName,this.dukanBio,this.address,this.phoneNumber,this.selectedCity).subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.modalRef.hide(),this.userProfile(),this.auth.sendDukanName(this.dukanName),this.auth.sendAddress(this.address),this.auth.sendContactNo(this.phoneNumber),this.auth.sendCityId(this.selectedCity),this.reuseFun.successShowSwal(e.data.message))},e=>{})}onSelectFile(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.url=e.target.result,this.spinner.show(),this.service.uploadImage(e.target.result).subscribe(e=>{400==e.data.code?(this.spinner.hide(),this.reuseFun.errorShowSwal(e.data.message)):(this.spinner.hide(),this.auth.sendProfileImage(e.data.result),$("#imageBtn").trigger("click"),this.profilePic=e.data.result,this.reuseFun.successShowSwal(e.data.message),this.userProfile(),this.spinner.hide())})}}}productDetail(e){this.routes.navigate(["/product-page"],{queryParams:{productId:e}})}editProduct(e){localStorage.setItem("productId",e),this.routes.navigate(["/edit-product"])}deleteProduct(e){h.a.fire({text:"Are you sure you want to Delete Product!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff5757",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value&&(this.spinner.show(),this.service.deleteProduct(this.userId,e).subscribe(e=>{400==e.data.code?(this.spinner.hide(),this.reuseFun.errorShowSwal(e.data.message)):(this.reuseFun.successShowSwal(e.data.message),this.userProfile(),this.spinner.hide())},e=>{}))})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(r.b),c.Mb(a.a),c.Mb(l.a),c.Mb(d.a),c.Mb(u.a),c.Mb(m.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-profile"]],features:[c.yb([o.a])],decls:43,vars:8,consts:[[2,"height","80px"],[1,"container"],[1,"row"],[1,"col-4"],[1,"d-flex"],["src","/happytail/assets/images/home.png",2,"width","30px","height","30px"],["routerLink","/home",1,"ml-2","pointer"],["src","/happytail/assets/images/3.png",1,"sug-acc-img","mr-2"],[1,"m-0"],[1,"col-8","container"],["class","sug-acc-img mr-2 mb-1","src","/happytail/assets/images/default.png",4,"ngIf"],["class","Profile-img mr-2",3,"src",4,"ngIf"],[1,"mt-4"],[1,"p-4"],[1,"d-flex","justify-content-center"],["class","d-flex",4,"ngIf"],[4,"ngIf"],["src","/happytail/assets/images/default.png",1,"sug-acc-img","mr-2","mb-1"],[1,"Profile-img","mr-2",3,"src"],[1,"like-btn",3,"click"],[1,"theme-btn-trnsp",3,"click"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mb-3"],["width","280","height","400","controls","",2,"object-fit","initial"],["type","video/mp4",3,"src"]],template:function(e,t){1&e&&(c.Nb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"div",3),c.Sb(4,"div",4),c.Nb(5,"img",5),c.Sb(6,"h3",6),c.Ic(7,"For you"),c.Rb(),c.Rb(),c.Nb(8,"div",4),c.Nb(9,"hr"),c.Sb(10,"h3"),c.Ic(11,"Suggestion accounts"),c.Rb(),c.Sb(12,"div",4),c.Nb(13,"img",7),c.Sb(14,"div"),c.Sb(15,"b",8),c.Ic(16,"Abc123"),c.Rb(),c.Nb(17,"br",8),c.Sb(18,"span",8),c.Ic(19,"zadsd"),c.Rb(),c.Rb(),c.Rb(),c.Nb(20,"hr"),c.Sb(21,"h3"),c.Ic(22,"Discover"),c.Rb(),c.Nb(23,"hr"),c.Nb(24,"p"),c.Rb(),c.Sb(25,"div",9),c.Sb(26,"div",4),c.Gc(27,b,1,0,"img",10),c.Gc(28,g,1,1,"img",11),c.Sb(29,"div",12),c.Sb(30,"h1"),c.Ic(31),c.Rb(),c.Nb(32,"br"),c.Rb(),c.Rb(),c.Nb(33,"div"),c.Sb(34,"div",13),c.Sb(35,"span"),c.Ic(36),c.Rb(),c.Rb(),c.Sb(37,"div",14),c.Gc(38,p,7,0,"div",15),c.Gc(39,f,7,0,"div",15),c.Rb(),c.Nb(40,"br"),c.Gc(41,v,2,1,"div",16),c.Gc(42,k,2,1,"div",16),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.zb(27),c.kc("ngIf",""==t.resultList1.profile_picture),c.zb(1),c.kc("ngIf",""!=t.resultList1.profile_picture),c.zb(3),c.Jc(null==t.resultList1?null:t.resultList1.username),c.zb(5),c.Jc(null==t.resultList1?null:t.resultList1.shelter_bio),c.zb(2),c.kc("ngIf",1==t.color),c.zb(1),c.kc("ngIf",2==t.color),c.zb(2),c.kc("ngIf",1==t.color),c.zb(1),c.kc("ngIf",2==t.color))},directives:[r.c,i.l,i.k],styles:[".login-btn[_ngcontent-%COMP%]{width:100%;color:#fe3159;background-color:initial;border:1px solid #fe2c55;height:48px;border-radius:4px}.sug-acc-img[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px}.follow-btn[_ngcontent-%COMP%]{color:#fe3159;background-color:initial;border:1px solid #fe2c55;height:48px;border-radius:4px;font-weight:600;font-size:16px;line-height:22px;min-width:88px;padding:0 10px;height:28px}.Profile-img[_ngcontent-%COMP%]{cursor:unset;width:116px;height:116px;border-radius:50%}.like-btn[_ngcontent-%COMP%]{background:#5894bd;color:#fff}.like-btn[_ngcontent-%COMP%], .theme-btn-trnsp[_ngcontent-%COMP%]{width:200px;height:70px;border-radius:25px;border:transparent}"]}),e})()}];var L=s("s7LF"),P=s("wTG2"),C=s("OniX");let F=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.c,r.e.forChild(I),L.f,d.b.forRoot(),o.b,P.b,C.a]]}),e})()}}]);