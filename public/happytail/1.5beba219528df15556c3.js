(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{CE70:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginModule",function(){return T});var s=i("SVse"),n=i("iInd"),o=i("jtHE"),r=i("XNiG"),a=i("quSY");class c extends r.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),a.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}var l=i("8Y7J");class h{constructor(){}loadScript(e,t,i,s=null){if("undefined"!=typeof document&&!document.getElementById(e)){let e=document.createElement("script");e.async=!0,e.src=t,e.onload=i,s||(s=document.head),s.appendChild(e)}}}class u{}let d=(()=>{class e extends h{constructor(e,t={scope:"email"}){super(),this.clientId=e,this.initOptions=t}initialize(){return new Promise((t,i)=>{try{this.loadScript(e.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{t()}).catch(e=>{i(e)})})})}catch(s){i(s)}})}getLoginStatus(t){const i=Object.assign(Object.assign({},this.initOptions),t);return new Promise((t,s)=>{if(this.auth2.isSignedIn.get()){let e=new u;const s=this.auth2.currentUser.get().getBasicProfile(),n=this.auth2.currentUser.get().getAuthResponse(!0);e.id=s.getId(),e.name=s.getName(),e.email=s.getEmail(),e.photoUrl=s.getImageUrl(),e.firstName=s.getGivenName(),e.lastName=s.getFamilyName(),e.response=n;const o=i=>{e.authToken=i.access_token,e.idToken=i.id_token,t(e)};i.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(o):o(this.auth2.currentUser.get().getAuthResponse(!0))}else s("No user is currently logged in with "+e.PROVIDER_ID)})}signIn(e){const t=Object.assign(Object.assign({},this.initOptions),e);return new Promise((i,s)=>{(t&&t.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(e=>{let t=new u;if(e&&e.code)t.authorizationCode=e.code;else{let e=this.auth2.currentUser.get().getBasicProfile(),i=this.auth2.currentUser.get().getAuthResponse(!0),s=i.access_token,n=i.id_token;t.id=e.getId(),t.name=e.getName(),t.email=e.getEmail(),t.photoUrl=e.getImageUrl(),t.firstName=e.getGivenName(),t.lastName=e.getFamilyName(),t.authToken=s,t.idToken=n,t.response=i}i(t)},e=>{s(e)}).catch(e=>{s(e)})})}signOut(e){return new Promise((t,i)=>{let s;s=e?this.auth2.disconnect():this.auth2.signOut(),s.then(e=>{e?i(e):t()}).catch(e=>{i(e)})})}}return e.PROVIDER_ID="GOOGLE",e})(),g=(()=>{class e{constructor(e){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new o.a(1),this.initialized=!1,this._initState=new c,e instanceof Promise?e.then(e=>{this.initialize(e)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(e=>{this.providers.set(e.id,e.provider)}),Promise.all(Array.from(this.providers.values()).map(e=>e.initialize())).then(()=>{if(this.autoLogin){const e=[];let t=!1;this.providers.forEach((i,s)=>{let n=i.getLoginStatus();e.push(n),n.then(e=>{e.provider=s,this._user=e,this._authState.next(e),t=!0}).catch(console.debug)}),Promise.all(e).catch(()=>{t||(this._user=null,this._authState.next(null))})}}).catch(e=>{t(e)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(t){return new Promise((i,s)=>{if(this.initialized)if(t!==d.PROVIDER_ID)s(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const n=this.providers.get(t);n?n.getLoginStatus({refreshToken:!0}).then(e=>{e.provider=t,this._user=e,this._authState.next(e),i()}).catch(e=>{s(e)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(e.ERR_NOT_INITIALIZED)})}signIn(t,i){return new Promise((s,n)=>{if(this.initialized){let o=this.providers.get(t);o?o.signIn(i).then(e=>{e.provider=t,s(e),this._user=e,this._authState.next(e)}).catch(e=>{n(e)}):n(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(e.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((i,s)=>{if(this.initialized)if(this._user){let n=this.providers.get(this._user.provider);n?n.signOut(t).then(()=>{i(),this._user=null,this._authState.next(null)}).catch(e=>{s(e)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(e.ERR_NOT_LOGGED_IN);else s(e.ERR_NOT_INITIALIZED)})}}return e.\u0275fac=function(t){return new(t||e)(l.ac("SocialAuthServiceConfig"))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac}),e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",e})(),p=(()=>{class e{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:e,providers:[g,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)(l.ac(e,12))},providers:[g],imports:[[s.c]]}),e})(),m=(()=>{class e extends h{constructor(e,t={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v4.0"}){super(),this.clientId=e,this.initOptions=t}initialize(){return new Promise((t,i)=>{try{this.loadScript(e.PROVIDER_ID,`//connect.facebook.net/${this.initOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.initOptions.version}),t()})}catch(s){i(s)}})}getLoginStatus(){return new Promise((t,i)=>{FB.getLoginStatus(s=>{if("connected"===s.status){let e=s.authResponse;FB.api("/me?fields="+this.initOptions.fields,i=>{let s=new u;s.id=i.id,s.name=i.name,s.email=i.email,s.photoUrl="https://graph.facebook.com/"+i.id+"/picture?type=normal&access_token="+e.accessToken,s.firstName=i.first_name,s.lastName=i.last_name,s.authToken=e.accessToken,s.response=i,t(s)})}else i("No user is currently logged in with "+e.PROVIDER_ID)})})}signIn(e){const t=Object.assign(Object.assign({},this.initOptions),e);return new Promise((e,i)=>{FB.login(s=>{if(s.authResponse){let i=s.authResponse;FB.api("/me?fields="+t.fields,t=>{let s=new u;s.id=t.id,s.name=t.name,s.email=t.email,s.photoUrl="https://graph.facebook.com/"+t.id+"/picture?type=normal",s.firstName=t.first_name,s.lastName=t.last_name,s.authToken=i.accessToken,s.response=t,e(s)})}else i("User cancelled login or did not fully authorize.")},t)})}signOut(){return new Promise((e,t)=>{FB.logout(t=>{e()})})}}return e.PROVIDER_ID="FACEBOOK",e})();var b=i("gkCN"),f=i("LqlI"),w=i("cFG6"),R=i("7g+E"),S=i("npAJ"),v=i("s7LF"),I=i("OniX");function _(e,t){1&e&&(l.Sb(0,"h3",30),l.Ic(1,"Forgot Password"),l.Rb())}function O(e,t){if(1&e){const e=l.Tb();l.Sb(0,"div"),l.Sb(1,"form",6,7),l.dc("submit",function(){l.xc(e);const t=l.uc(2);return l.fc(2).checkEmail(t)}),l.Sb(3,"div",31),l.Sb(4,"div"),l.Sb(5,"label",12),l.Ic(6,"Email"),l.Rb(),l.Sb(7,"input",32),l.dc("ngModelChange",function(t){return l.xc(e),l.fc(2).Email=t})("ngModelChange",function(){return l.xc(e),l.fc(2).removeErrors("#l3")}),l.Rb(),l.Nb(8,"span",33),l.Rb(),l.Rb(),l.Sb(9,"button",34),l.Ic(10,"Submit "),l.Rb(),l.Rb(),l.Rb()}if(2&e){const e=l.fc(2);l.zb(7),l.kc("ngModel",e.Email)}}function P(e,t){if(1&e){const e=l.Tb();l.Sb(0,"div",35),l.Nb(1,"img",36),l.Sb(2,"h2"),l.Ic(3,"Verify Your mobile number"),l.Rb(),l.Sb(4,"h5"),l.Ic(5,"Enter 4-digit code send to your mobile number"),l.Rb(),l.Sb(6,"otp",37),l.dc("onValueChange",function(t){return l.xc(e),l.fc(2).onInputChange(t)}),l.Rb(),l.Rb()}if(2&e){const e=l.fc(2);l.zb(6),l.kc("setting",e.settings)}}function E(e,t){if(1&e){const e=l.Tb();l.Sb(0,"div"),l.Sb(1,"form",6,7),l.dc("submit",function(){l.xc(e);const t=l.uc(2);return l.fc(2).checkChangePassword(t)}),l.Sb(3,"div",31),l.Sb(4,"div"),l.Sb(5,"label",12),l.Ic(6,"New Password"),l.Rb(),l.Sb(7,"input",38),l.dc("ngModelChange",function(t){return l.xc(e),l.fc(2).newPassword=t})("ngModelChange",function(){return l.xc(e),l.fc(2).removeErrors("#l4")}),l.Rb(),l.Sb(8,"img",39),l.dc("click",function(){return l.xc(e),l.fc(2).passwordShowHide()}),l.Rb(),l.Nb(9,"span",40),l.Rb(),l.Sb(10,"div"),l.Sb(11,"label",12),l.Ic(12,"Confirm Password"),l.Rb(),l.Sb(13,"input",41),l.dc("ngModelChange",function(t){return l.xc(e),l.fc(2).confirmPassword=t})("ngModelChange",function(){return l.xc(e),l.fc(2).removeErrors("#l5")}),l.Rb(),l.Sb(14,"img",39),l.dc("click",function(){return l.xc(e),l.fc(2).passwordShowHideConfirmPassword()}),l.Rb(),l.Nb(15,"span",42),l.Rb(),l.Rb(),l.Sb(16,"button",34),l.Ic(17,"Submit "),l.Rb(),l.Rb(),l.Rb()}if(2&e){const e=l.fc(2);l.zb(7),l.kc("type",e.show?"text":"password")("ngModel",e.newPassword),l.zb(1),l.kc("src",e.visibilityIcon,l.zc),l.zb(5),l.kc("type",e.show1?"text":"password")("ngModel",e.confirmPassword),l.zb(1),l.kc("src",e.visibilityIcon1,l.zc)}}function k(e,t){if(1&e){const e=l.Tb();l.Sb(0,"div",24),l.Sb(1,"button",25),l.dc("click",function(){return l.xc(e),l.fc().modalRef.hide().close()}),l.Sb(2,"span",26),l.Ic(3,"\xd7"),l.Rb(),l.Rb(),l.Gc(4,_,2,0,"h3",27),l.Gc(5,O,11,1,"div",28),l.Gc(6,P,7,1,"div",29),l.Gc(7,E,18,6,"div",28),l.Rb()}if(2&e){const e=l.fc();l.zb(4),l.kc("ngIf",0==e.formToggle),l.zb(1),l.kc("ngIf",0==e.formToggle),l.zb(1),l.kc("ngIf",1==e.formToggle),l.zb(1),l.kc("ngIf",2==e.formToggle)}}const x=[{path:"",component:(()=>{class e{constructor(e,t,i,s,n,o,r){this.reuseFun=e,this.modalService=t,this.routes=i,this.service=s,this.spinner=n,this.auth=o,this.authSocialService=r,this.GoogleLoginProvider=d,this.config={ignoreBackdropClick:!0,class:"modal-md modal-dialog-centered"},this.visibilityIcon="/happytail/assets/images/hide.png",this.visibilityIcon1="/happytail/assets/images/hide.png",this.formToggle=0,this.Password="",this.Email="",this.type="R",this.newPassword="",this.confirmPassword="",this.settings={length:4,numbersOnly:!0,timer:60,timerType:1},this.imagePath=this.reuseFun.imagePath,this.auth.isLoggedIn()&&this.routes.navigate(["/home"]),this.show=!1}ngOnInit(){this.authSocialService.authState.subscribe(e=>{this.user=e})}back(){1==this.formToggle&&(this.formToggle=0),2==this.formToggle&&(this.formToggle=1)}passwordShowHide(){this.show=this.reuseFun.passwordVisibility(),this.visibilityIcon=this.show?"/happytail/assets/images/show.png":"/happytail/assets/images/hide.png"}newPasswordShowHide(){this.show=this.reuseFun.passwordVisibility(),this.visibilityIcon=this.show?"/happytail/assets/images/show.png":"/happytail/assets/images/hide.png"}passwordShowHideConfirmPassword(){this.show1=this.reuseFun.passwordVisibility(),this.visibilityIcon1=this.show1?"/happytail/assets/images/show.png":"/happytail/assets/images/hide.png"}refreshGoogleToken(){this.authSocialService.refreshAuthToken(d.PROVIDER_ID)}removeErrors(e){$(e).text("")}modalFP(e){this.Email=null,this.modalRef=this.modalService.show(e,this.config)}checkEmail(e){let t=!1;this.reuseFun.emailType("#l3",this.Email)&&(t=!0),0==t&&this.onSubmitEmail()}checkChangePassword(e){let t=!1;this.reuseFun.textTypeLength("#l4","new Password",this.newPassword,6,30)&&(t=!0),this.reuseFun.confirmPasswordValidator("#l5","Confirm password",this.newPassword,this.confirmPassword)&&(t=!0),0==t&&this.changePasswordF()}close(){this.Email=null}changePasswordF(){this.spinner.show(),this.service.changePasswordF(this.Email,JSON.stringify(this.otpResult),this.newPassword,this.type).subscribe(e=>{400==e.data.code?(this.spinner.hide(),this.reuseFun.errorShowSwal(e.data.message)):(this.reuseFun.successShowSwal(e.data.message),this.formToggle=!1,this.otpResult=e.data.OTP,this.spinner.hide(),this.modalRef.hide())},e=>{})}onInputChange(e){e.length==this.settings.length?(e==this.otpResult?this.formToggle=2:this.reuseFun.errorShowSwal("Invalid OTP"),console.log("otp is",e)):-1==e?console.log(e,"resend button enables"):-2==e&&this.onSubmitEmail()}onSubmitEmail(){this.spinner.show(),this.service.validateEmail(this.Email).subscribe(e=>{400==e.data.code?(this.reuseFun.errorShowSwal(e.data.message),this.spinner.hide()):(this.otpResult=e.data.OTP,this.formToggle=1,this.reuseFun.successShowSwal(e.data.message),this.spinner.hide())},e=>{})}numberCheck(e){return this.reuseFun.numberCheckWithLength(e)}checkLogin(e){let t=!1;this.reuseFun.emailType("#l1",e.value.email)&&(t=!0),this.reuseFun.textTypeLength("#l2","Password",e.value.password.trim().length,6,30)&&(t=!0),0==t&&this.onSubmitLogin(e)}onSubmitLogin(e){this.spinner.show(),this.service.login(e.value.email,e.value.password).subscribe(e=>{this.auth.sendToken(e.token),this.auth.sendFullName(e.data.name),this.auth.sendUserId(e.data.id),this.auth.sendProfileImage(e.data.profile_picture_url),this.reuseFun.successShowSwal(e.data.message),this.auth.sendEmail(e.data.email),this.routes.navigate(["/home"]),this.spinner.hide()},e=>{this.reuseFun.errorShowSwal(e.message)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(b.a),l.Mb(f.a),l.Mb(n.b),l.Mb(w.a),l.Mb(R.b),l.Mb(S.a),l.Mb(g))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-login"]],decls:38,vars:2,consts:[[2,"height","40px"],[1,"container",2,"margin-top","20px"],[1,"row"],[1,"col-md-5","col-sm-8","col-12","ml-auto","mr-auto"],[1,"center","mb-4"],[1,"p-3","card"],[3,"submit"],["f","ngForm"],[1,"mb-0","mt-0","ml-1"],["type","email","name","email","ngModel","","email","","required","","placeholder","abc@xyz.com",1,"form-control","input-field-custom",3,"ngModelChange"],["email","ngModel"],["id","l1",1,"help-block","position-absolute"],[1,"mb-0","mt-3","ml-1"],[1,"input-field-custom","has-search","position-relative","initial"],["id","pass","minlength","6","maxlength","30","ngModel","","name","password","required","","placeholder","*******",2,"background-color","transparent !important","border","none","padding","11px","border-radius","5px","width","90%",3,"type","ngModelChange"],["password","ngModel"],["height","20px",3,"src","click"],["id","l2",1,"help-block","position-absolute"],["type","submit",1,"mt-4","sign-in-btn"],[1,"mt-3",2,"text-align","center"],["routerLink","/signup",1,"join-todays"],[1,"center","mt-4"],["routerLink","/home"],["fpTemplate",""],[1,"modal-body"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modalTitle  mt-1 mb-1",4,"ngIf"],[4,"ngIf"],["class","p-3 center card-custom",4,"ngIf"],[1,"modalTitle","mt-1","mb-1"],[1,"form-group"],["name","Email","placeholder","abc@xyz.com","required","","type","email",1,"form-control","input-field-custom",3,"ngModel","ngModelChange"],["id","l3",1,"ml-1","help-block","position-absolute"],["type","submit",1,"mt-3","sign-in-btn"],[1,"p-3","center","card-custom"],["src","/happytail/assets/images/otp.png","alt","",1,"otp-img"],[3,"setting","onValueChange"],["minlength","6","maxlength","30","name","newPassword","placeholder","******","required","","type","password",1,"form-control","input-field-custom",3,"type","ngModel","ngModelChange"],["height","20px",1,"hide-show",3,"src","click"],["id","l4",1,"ml-1","help-block","position-absolute"],["minlength","6","maxlength","30","name","confirmPassword","placeholder","******","required","","type","password",1,"form-control","input-field-custom",3,"type","ngModel","ngModelChange"],["id","l5",1,"ml-1","help-block","position-absolute"]],template:function(e,t){if(1&e){const e=l.Tb();l.Nb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"div",2),l.Sb(3,"div",3),l.Sb(4,"div",4),l.Sb(5,"h1"),l.Ic(6,"HUPPY TAIL"),l.Rb(),l.Rb(),l.Sb(7,"div",5),l.Sb(8,"h2"),l.Ic(9,"Login"),l.Rb(),l.Sb(10,"form",6,7),l.dc("submit",function(){l.xc(e);const i=l.uc(11);return t.checkLogin(i)}),l.Sb(12,"div"),l.Sb(13,"label",8),l.Ic(14,"Email"),l.Rb(),l.Sb(15,"input",9,10),l.dc("ngModelChange",function(){return t.removeErrors("#l1")}),l.Rb(),l.Nb(17,"span",11),l.Rb(),l.Sb(18,"div"),l.Sb(19,"label",12),l.Ic(20,"Password"),l.Rb(),l.Sb(21,"div",13),l.Sb(22,"input",14,15),l.dc("ngModelChange",function(){return t.removeErrors("#l2")}),l.Rb(),l.Sb(24,"img",16),l.dc("click",function(){return t.passwordShowHide()}),l.Rb(),l.Rb(),l.Nb(25,"span",17),l.Rb(),l.Sb(26,"button",18),l.Ic(27," Sign In "),l.Rb(),l.Sb(28,"p",19),l.Ic(29,"New member? "),l.Sb(30,"a",20),l.Ic(31,"Sign up "),l.Rb(),l.Ic(32,"here "),l.Rb(),l.Sb(33,"div",21),l.Sb(34,"a",22),l.Ic(35," Continue as Guest "),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Gc(36,k,8,4,"ng-template",null,23,l.Hc)}2&e&&(l.zb(22),l.kc("type",t.show?"text":"password"),l.zb(2),l.kc("src",t.visibilityIcon,l.zc))},directives:[v.s,v.l,v.m,v.a,v.k,v.n,v.b,v.q,v.h,v.g,n.d,s.l,I.b],styles:[".input-field-custom[_ngcontent-%COMP%]{background-color:#fefcfc;border-radius:4px;border:transparent;font-weight:400;height:45px;border:1px solid hsla(0,0%,47.5%,.9)}.sign-in-btn[_ngcontent-%COMP%]{background:#5894bd}.fb-btn[_ngcontent-%COMP%], .sign-in-btn[_ngcontent-%COMP%]{border-radius:4px;border:transparent;height:45px;color:#fff;width:-webkit-fill-available}.fb-btn[_ngcontent-%COMP%]{background:#4267b2}.google-btn[_ngcontent-%COMP%]{background:#444549;border-radius:4px;border:transparent;height:45px;color:#fff;width:-webkit-fill-available}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:15px;border:transparent;background-color:#ededed;font-size:13px;font-weight:400;padding:18px 3rem;height:70px}.initial[_ngcontent-%COMP%]{text-align:initial}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-top:4px}.join-today[_ngcontent-%COMP%]{color:#ff5757}.submit-btn[_ngcontent-%COMP%]{background-color:#ff5757;border:transparent}.modalTitle[_ngcontent-%COMP%]{font-size:30px;text-align:center}.line-hr[_ngcontent-%COMP%]{width:40%;border:1px solid rgba(0,0,0,.5)}.googleplay-img[_ngcontent-%COMP%]{width:212px;height:59px}.fb-icon[_ngcontent-%COMP%]{margin-left:-75px}.fb-text[_ngcontent-%COMP%]{margin-left:50px}.back-icon[_ngcontent-%COMP%]{height:20px;width:20px}.hide-show[_ngcontent-%COMP%]{float:right;position:relative;margin-top:-30px;margin-right:10px}"]}),e})()}];var y=i("G0yt");let T=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:d.PROVIDER_ID,provider:new d("1065377715397-bc9mao4l1ncifpp2uvefgv448fuaibv4.apps.googleusercontent.com")},{id:m.PROVIDER_ID,provider:new m("491747785409460")}]}}],imports:[[s.c,p,n.e.forChild(x),v.f,f.b.forRoot(),y.b,I.a]]}),e})()}}]);